use barton-nackman trick to give classes an insertion operator that calls
virtual print

