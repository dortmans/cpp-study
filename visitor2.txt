now factor out the accept part using crtp

